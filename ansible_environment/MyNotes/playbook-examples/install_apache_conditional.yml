---
- name: Install Apache
  hosts: servers
  remote_user: root
#  gather_facts: false

  tasks:
  - name: Ensure Apache is installed when OS distribution is Ubuntu
    apt:
      name: apache2
      state: present
    when: ansible_facts['distribution'] == "Ubuntu"

  - name: Ensure Apache is installed when OS distribution is RHEL
    yum: 
      name: httpd
      state: present
    when: ansible_facts['distribution'] == "RHEL"

  - name: Start the apache service with enabling the service to start on boot.
    service:
      name: apache2
      state: started
      enabled: yes
